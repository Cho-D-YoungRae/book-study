# 내용 정리

## Chapter 01. 들어가며

카프카는 각각의 애플리케이션끼리 연결하여 데이터를 처리하는 것이 아니라 한 곳에 모아 처리할 수 있도록 중앙 집중화

카프카를 중앙에 배치함으로써 소스 애플리케이션과 타깃 애플리케이션 사이의 의존도를 최소화하여 커플링을 완화

데이터 포맷 사실상 제한 없음

- 직렬화, 역직렬화를 통해 ByteArray 로 통신
- 기본적으로 제공하는 직렬화, 역직렬화 클래스와 커스텀 가능

아파치 카프카가 왜 데이터 파이프라인으로 적합한지

- 높은 처리량
  - 배치처리
    - 프로듀서가 브로커로 데이터를 보낼 때와 컨슈머가 브로커로부터 데이터를 받을 때 모두 묶어서 전송
    - 네트워크 통신 횟수 감소
  - 파티션
    - 병렬처리
- 확장성
  - 스케일 아웃과 스케일 인 가능
- 영속성
  - 데이터를 메모리에 저장하지 않고 파일 시스템에 저장
  - 페이지 캐시를 사용하므로 파일 시스템에 저장하고 데이터를 저장, 전송하더라도 처리량 높음
  - 디스크 기반의 파일 시스템을 활용한 덕분에 브로커 애플리케이션이 장애 발생으로 인해 급작스럽게 종료되더라고 프로세스를 재시작하여 안전하게 데이터를 다시 처리할 수 있음
- 고가용성
  - 3개 이상의 서버들로 운영되는 카프카 클러스터는 일부 서버에 장애가 발생하더라도 무중단으로 안전하고 지속적으로 데이터를 처리할 수 있음

카프카 클러스터를 1대, 2대가 아닌 3대 이상의 브로커들로 구성해야 하는 이유

> 1대로 운영할 경우 브로커의 장애는 서비스의 장애로 이어짐.  
> 2대로 운영할 경우 브로커 간 데이터가 복제되는 시간차이로 인해 일부 데이터가 유실될 가능성 있음.  
> 유실을 막기 위해서 `min.insync.replicas` 옵션을 사용 할 수 있음. 이 옵션을 사용하려면 브로커를 3대 이상으로 운영해야 함. 그래야 3대 중 1개의 브로커에 장애가 나더라도 지속적으로 데이터를 처리할 수 있음.  
> `min.insync.replicas` 옵션값보다 작은 수의 브로커가 존재할 때는 토픽에 더는 데이터를 넣을 수 없음.

