# Chapter 09. 도메인 모델과 바운디드 컨텍스트

## 9.1 도메인 모델과 경계

- 한 개의 모델로 여러 하위 도메인을 모두 표현하려고 시도하면 오히려 모든 하위 도메인에 맞지 않는 모델을 만들게 됨
- 하위 도메인마다 사용하는 용어가 다르기 떄문에 올바른 도메인 모델을 개발하려면 하위 도메인마다 모델을 만들어야 함
- 각 모델은 명시적으로 구분되는 경계를 가져서 섞이지 않도록 해야 함
- 이렇게 구분되는 경계를 갖는 컨텍스트를 DDD에서는 바운디드 컨텍스트(Bounded Context)라고 함

## 9.2 바운디드 컨텍스트

- 바운디드 컨텍스트는 모델의 경계를 결정하며 한 개의 바운디드 컨텍스트는 논리적으로 한 개의 모델을 갖음
- 용어를 기준으로 구분
- 이상적으로 하위 도메인과 바운디드 컨텍스트가 일대일 관계를 가지면 좋겠지만 현실은 그렇지 않을 떄가 많음
  - 한 하위 도메인에 두 개 이상의 바운디드 컨텍스트가 존재
  - 두 하위 도메인을 하나의 바운디드 컨텍스트에서 구현
- 여러 하위 도메인을 하나의 바운디드 컨텍스트에서 개발할 때 **주의할 점**은 각 하위 도메인의 모델이 섞이지 않돌고 하는 것
- 바운디드 컨텍스트는 도메인 모델을 구분하는 경계가 되기 때문에 바운디드 컨텍스트는 구현하는 하위 도메인에 알맞은 모델을 포함

## 9.3 바운디드 컨텍스트 구현

- 바운디드 컨텍스트는 도메인 모델뿐만 아니라 표현 영역, 응용 서비스, 인프라스트럭처 영역, DB 테이블 스키마를 포함
- 각 바운디드 컨텍스트는 서로 다른 구현 기술을 사용할 수 있음
- 바운디드 컨텍스트가 반드시 ㅏㅅ용자에게 보여지는 UI를 가지고 있어야 하는 것은 아님

## 9.4 바운디드 컨텍스트 간 통합

- REST API를 호출하는 것은 두 바운디드 컨텍스트를 직접 통합하는 방법
- 메시지 큐를 사용하는 것은 간접 통합 방시

## 9.5 바운디드 컨텍스트 간 관계

- 바운디드 컨텍스트는 어떤 식으로든 연결되기 때문에 두 바운디드 컨텍스트는 다양한 방식으로 관계를 맺음
- 두 바운디드 컨텍스트 간 관계 중 가장 흔한 관계는 한 쪽에서 API 를 제공하고 다른 한 쪽에서 그 API 를 호출하는 관계
- 이 관계에서 API 를 사용하는 바운디드 컨텍스트(하류)는 API를 제공하는 바운디드 컨텍스트(상류)에  의존하게 됨
- 상류 컴포넌트가 제공하는 API 의 인터페이스가 바뀌면 하류 컴포넌트의 코드도 바뀌게 됨
- 상류 컴포넌트는 일종의 서비스 공급자 역할을 하며 하류 컴포넌트는 그 서비스를 사용하는 고객 역할을 함
- 상류 팀의 고객인 하류 팀이 다수 존재하면 상류 팀은 여러 하류 팀의 요구사항을 수용할 수 있는 API를 만들고 이를 서비스 형태로 공개해서 서비스의 일관성을 유지할 수 있는데, 이런 서비스를 가리켜 공개 호스트 서비스(Open Host Service) 라고 함
- 상류 컴포넌트의 서비스는 상류 바운디드 컨텍스트의 도메인 모델을 따름
- 두 바운디드 컨텍스트가 같은 모델을 공유하는 경우도 있는데, 이런 모델을 공유 커널(Shared Kernel)이라고 부름
  - 중복을 중여주는 장점
  - 임의로 모델을 변경하면 안되며
  - 두 팀이 밀접한 고나계를 유지해야 함

## 9.6 컨텍스트 맵

- 개별 바운디드 컨텍스트에 매몰되면 전체를 보지 못할 떄가 있음
- 컨텍스트 맵은 바운디드 컨텍스트 간의 관계를 표시한 것
- 하위 도메인과 일치하지 않는 바운디드 컨텍스트를 찾아 도매인에 맞게 바운디드 컨텍스트를 조절하고 사업의 핵심 도메인을 위해 조직 역량을 어떤 바운디드 컨텍스트에 집중할지 파악하는 데 도움을 줌
