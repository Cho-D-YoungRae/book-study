# Chapter 07. 도메인 서비스

## 7.1 여러 애그리거트가 필요한 기능

- 한 애그리거트로 기능을 구현할 수 없을 때 -> 도메인 기능을 별도 서비스로 구현

## 7.2 도메인 서비스

- 도메인 서비스는 도메인 영역에 위치한 도메인 로직을 표현할 때 사용
- 주로 다음 상황에서 사용
  - 계산 로직: 여러 애그리거트가 필요한 계산 로직이나, 한 애그리거트에 넣기에는 다소 복잡한 계산 로직
  - 외부 시스템 연동이 필요한 도메인 로직: 구현하기 위해 타 시스템을 사용해야 하는 도메인 로직

## 7.2.1 계산 로직과 도메인 서비스

- 한 애그리거트에 넣기 애매한 도메인 개념을 구현하려면 애그리거트에 억지로 넣기보다는 도메인 서비스를 이용해서 도메인 개념을 명시적으로 드러내면 됨
- 응용 영역의 서비스가 응용 로직을 다룬다면 도메인 서비스는 도메인 로직을 다룸
- 도메인 영역의 애그리거트나 밸류와 같은 구성요소와 도메인 서비스를 비교할 때 **다른 점**은 도메인 서비스는 상태 없이 로직만 구현한다는 점
- 도메인 서비스를 구현하는 데 필요한 상태는 다른 방법으로 전달 받음
- 도메인 서비스를 사용하는 주체는 애그리거트가 될 수도 있고 응용 서비스가 될 수도 있음
- 애그리거트에서 사용하게 되면 애그리거트 객체에 도메인 서비스를 전달하는 것은 응용 서비스 책임
- 도메인 서비스의 기능을 실행할 때 애그리거트를 전달하기도 함
- 도메인 서비스는 도메인 로직을 수행하지 트랜잭션 처리와 같은 응용 로직을 수행하지는 않음
- 특정 기능이 응용 서비스인지 도메인 서비스인지 감을 잡기 어려울 때는 해당 로직이 애그리거트의 상태를 변경하거나 애그리거트의 상태 값을 계산하는지 검사

### 7.2.2 외부 시스템 연동과 도메인 서비스

- 외부 시스템이나 타 도메인과의 연동 기능도 도메인 서비스가 될 수 있음
- 시스템 간 연동은 HTTP API 호출로 이루어질 수 있지만 도메인 로직으로 볼 수도 있음
- 도메인 로직 관점에서 인터페이스를 작성

### 7.2.3 도메인 서비스 패키지 위치

- 도메인 서비스는 도메인 로직을 표현하므로 도메인 서비스의 위치는 다른 도메인 구성요소와 동일한 패키지에 위치

### 7.2.4 도메인 서비스의 인터페이스와 클래스

- 도메인 서비스의 로직이 고정되어 있지 않은 경우 도메인 서비스 자체를 인터페이스로 구현하고 이를 구현한 클래스를 둘 수도 있음
