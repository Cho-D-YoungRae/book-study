# Chapter 5. 안정 해시 설계

수평적 규모 확장성을 달성하기 위해서는 요청 또는 데이터를 서버에 균등하게 나누는 것이 중요한데, 안정 해시는 이 목표를 달성하기 위해 보편적으로 사용하는 기술이다.

## 안정 해시

- 해시 테이블 크기가 조정될 때 오직 k/n 개의 키만 재배치
  - k = 키의 개수, n = 슬롯

### 기본 구현법

- 서버와 키를 균등 분포 해시 함수를 사용해 해시 링에 배치
- 키의 위치에서 링을 시계방향으로 탐색하다 만나는 최초의 서버가 키가 저장될 서버

### 기본 구현법의 두 가지 문제

1. 서버가 추가되거나 삭제되는 상황을 감안하면 파티션의 크기를 균등하게 유지하는 게 불가능
2. 키의 균등 분포를 달성하기가 어려움

#### 가상 노드(복제)

> 위 문제를 해결하기 위해 제안된 기법

- 실제 노드 또는 서버를 가리키는 노드로서, 하나의 서버는 링 위에 여러 개의 가상 노드를 가질 수 있음
- 가상 노드의 개수를 늘리면 키의 분포는 점점 더 균등 해짐
  - 표준 편차가 작아져서 데이터가 고르게 분포