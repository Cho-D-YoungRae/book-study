# 현실 세계의 OAuth 2.0

## 6.1 인가 그랜트 타입

- OAuth 2.0 이 달라질 수 있는 주요 영역 중 하나는 OAuth 플로라는 인가 그랜트 영역
- 인가 코드 그랜트 타입은 OAuth 클라이언트가 인가 서버에서 토큰을 얻기 위한 여러 가지 방법 중 하나

### 6.1.1 암시적 그랜트 타입

- 클라이언트가 웹 브라우저 내부에 있는 경우
- 클라이언트는 웹 브라우저로부터 중요한 정보를 보호할 수 없고, 웹 브라우저는 클라이언트의 실행에 관련된 모든 것을 알 수 있으므로 웹 브라우저를 통해 인증 코드를 클라이언트에게 전달하는 데 있어서 실질적인 이점이 없고, 클라이언트가 토큰에 대한 정보를 교환 하기 위한 별도의 비밀 계층이 전혀 보호되지 않음
- 인가 서버와의 통신을 위해 프론트 채널만 사용
- 웹 사이트에 삽입되 어느 정도 제한되고, 보안 도메인 간에 공유 되는 세션에 대한 인가를 수행해야 하는 자바스크립트 애플리케이션에서 유용할 수 있음
- 클라이언트 시크릿을 포함한 모든 것이 웹브라우저에 노출
- 토큰 엔드 포인트는 사용하지 않고 인가 엔드 포인트만 사용
- 리프레시 토큰 얻을 수 없음
  - 웹 브라우저에서 실행되는 애플리케이션은 그 생명주기가 짧고, 애플리케이션을 로드한 웹 브라우저 컨텍스트의 세션만큼만 유지되기 때문에 리프레시 토큰의 유용성은 매우 제한적
- `response_type` 파라미터 값이 `code` 가 아닌 `token` 사용

### 6.1.2 클라이언트 자격 증명 그랜트 타입

- 클라이언트에게 권한을 인가해줄 사용자가 없는 경우
- `grant_type` 파라미터 값으로 `client_credentials`
- 클라이언트는 별도의 리소스 소유자 없이 언제든지 자기자신을 위해 새로운 토큰을 요청할 수 있다고 가정하기 때문에 리프레시 토큰이 필요 없음

### 6.1.3 리소스 소유자 자격 증명 그랜트 타입

- 리소스 소유자가 인가 서버에 암호화되지 않은 사용자 이름과 비밀번호를 갖고 있다면 클라이언트는 사용자에게 해당 자격 증명 정보를 요구한 후 그것을 액세스 토큰과 교환할 수 있음
- 이와 같은 리소스 소유자 자격 증명 그랜트 타입은 비밀번호 플로라고도 함
- 리소스 소유자는 클라이언트와 직접 상호 작용하며, 인가 서버와는 상호 작용 하지 않음
- 토큰 엔드 포인트만 사용하며, 백 채널만 사용
- 안티 패턴
  - 리소스 소우자의 자격 증명 정보가 암호화되지 않은 상태로 클라이언트에게 노출되고 클라이언트는 그것을 캐싱하거나 언제든지 사용할 수 있음
  - 사용자 경험에 영향을 미치지 않고 폐기하거나 순환시킬 수 있는 OAuth 토큰과 달리, 사용자의 이름과 비밀번호는 관리하거나 변경하는 것이 훨씬 어려운 경향이 있음

### 6.1.4 어설션 그랜트 타입

- 클라이언트가 토큰을 교환하는 과정에 어설션(assertion)이라는 구조화되고 암호로 보호된 항목을 사용
- 어설션은 자격증과 같은 일종의 인증된 문서라고 생각할 수 있음
- 백 채널만 사용
