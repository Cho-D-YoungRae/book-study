# Chapter 3. 테스트 코드 작성 순서

- 쉬운 경우에서 어려운 경우로 진행
- 예외적인 경우에서 정상인 경우로 진행

## 테스트 코드 작성 순서

### 초반에 복잡한 테스트부터 시작하면 안 되는 이유

- 테스트를 통과시키기 위해 한 번에 구현해야 할 코드가 많아짐
- 한번에 많은 코드를 만들다 보면 나도 모르게 버그를 만들고 나중에 버그를 잡기 위해 많은 시간을 허비
- 코드 작성 시간이 길어지면 집중력도 떨어져서 흐름이 자주 끊김

### 구현하기 쉬운 테스트부터 시작하기

- 암호 강도 측정 예에서 가장 쉬운 테스트
  - 모든 조건을 충족하는 경우
  - 모든 조건을 충족하지 않는 경우
- 다음으로 구현할 테스트도 구현하기 쉬운 것부터

### 예외 상황을 먼저 테스트해야 하는 이유

- 초반에 예외 상황을 테스트 하면 이에 따른 if-else 구조가 미리 만들어지기 때문에 많은 코드를 완성한 뒤에 예외 상황을 반영할 때보다 코드 구조가 덜 바뀜
- TDD를 하는 동안 예외 상황을 찾고 테스트에 반영하면 예외 상황을 처리하지 않아 발생하는 버그 줄여줌

### 완급 조절

- 한 번에 얼마만큼의 코드를 작성할 것인가
  1. 정해진 값을 리턴
  2. 값 비교를 이용해서 정해진 값을 리턴
  3. 다양한 테스트를 추가하면서 구현을 일반화

### 지속적인 리팩토링

- 매번 리팩토링을 진행해야 하는 것은 아니지만 적당한 후보가 보이면 리팩토링을 진행
- 코드 중복은 대표적인 리팩토링 대상

## 테스트 작성 순서 연습

### 쉬운 것부터 테스트

- 구현하기 쉬운 것부터 먼저 테스트
- 예외 상황을 먼저 테스트

### 예를 추가하면서 구현을 일반화

### 코드 정리: 중복 제거

- 보통은 중복을 제거한느 것이 좋지만, 테스트 코드의 중복제거는 고민 필요
  - 각 테스트 메서드는 스스로 뭉서을 테스트하는지 명확하게 설명할 수 있어야 함
  - 테스트 코드의 구현을 기계적으로 제거하면 자칫 테스트 메서드가 검증하고 싶은 내용을 알아보기 힘들 수 있음

## 테스트할 목록 정리하기

- TDD를 시작할 때 테스트할 목록을 미리 정리
- 테스트할 내용을 정리했다면 이 중 어떤 테스트가 구현이 쉬울지, 어떤 테스트가 예외적인지 상상
  - 시간을 조금 들여서 구현의 난이도나 구조를 검토하면 다음 테스트를 선택할 때 도움
- 테스트 과정에서 새로운 테스트 사례를 발견하면 그 사례를 목록에 추가

## 시작이 안 될 떄는 단언부터 고민

- 테스트 코드를 작성하다 보면 시작이 잘 안 될 때가 있는데 이럴 땐 검증하는 코드부터 작성하기 시작하면 도움이 됨